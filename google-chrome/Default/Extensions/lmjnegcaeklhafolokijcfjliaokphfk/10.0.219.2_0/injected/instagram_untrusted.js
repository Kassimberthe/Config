var y=new BroadcastChannel("worker_service");var s={FromInjectedToService:0,FromContentToService:1,FromServiceToWorker:2,FromWorkerToService:3,FromUntrustedInjectedToTrusted:4,FromTrustedInjectedToUntrusted:5,FromServiceToContent:6,FromServiceToInjected:7,FromServiceToService:8};function l(e,a=0){let t=3735928559^a,o=1103547991^a;for(let d=0,i;d<e.length;d++)i=e.charCodeAt(d),t=Math.imul(t^i,2654435761),o=Math.imul(o^i,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(o^o>>>13,3266489909),o=Math.imul(o^o>>>16,2246822507),o^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&o)+(t>>>0)}var m=new BroadcastChannel(`injected-${l(window.location.href)}`);function c(e){let a=s.FromUntrustedInjectedToTrusted;m.postMessage({msg:e,channel:a})}function u(e){let a=t=>{let o=t.data.msg;t.data.channel==s.FromTrustedInjectedToUntrusted&&e(o)};return m.addEventListener("message",a),()=>{m.removeEventListener("message",a)}}var n,_,r,T=!1;function g(){if(window.location.href.match(/instagram\.com(?:\/.*)?\/reel/)){let e=window.location.href.match(/\/reels?\/([^\/?#]+)/);e&&e.length>1&&(r="reel",n=e[1])}else if(window.location.href.includes("instagram.com/p/")){let e=window.location.href.match(/instagram\.com\/p\/([^\/]+)/);e&&e.length>1&&(n=e[1],r="post")}else if(window.location.href.includes("instagram.com/stories/")){let e=window.location.href.match(/instagram\.com\/stories\/[^\/]+\/([^\/]+)/);e&&e.length>1&&(n=e[1],r="story")}}async function p(){if(!T)for(T=!0;;){if(g(),!n||n==_||!r){await new Promise(e=>setTimeout(e,300));continue}_=n,c({name:"instagram_on_media",data:{media_id:n,media_type:r}})}}u(e=>{e.name=="instagram_request_media"&&p()});p();
